{
  "$schema": "https://dataapibuilder.azureedge.net/schemas/v1.5.0/dab.draft.schema.json",
  "data-source": {
    "database-type": "postgresql",
    "connection-string": "@akv('pg-wellbeing-os')"
  },
  "azure-key-vault": {
    "endpoint": "https://wellbeing-os-keyvault.vault.azure.net/",
    "retry-policy": {
      "mode": "exponential",
      "max-count": 5,
      "delay-seconds": 2,
      "max-delay-seconds": 30,
      "network-timeout-seconds": 45
    }
  },
  "runtime": {
    "rest": {
      "path": "/",
      "enabled": true
    },
    "graphql": {
      "enabled": false
    }
  },
  "entities": {
    "dashboard-overview": {
      "source": {
        "type": "view",
        "object": "whanau_ora.mv_dashboard_overview_daily",
        "key-fields": [
          "org_sk",
          "date_id"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dashboard-goals": {
      "source": {
        "type": "table",
        "object": "whanau_ora.fact_goals_snapshot",
        "key-fields": [
          "org_sk",
          "goal_id"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dashboard-referrals": {
      "source": {
        "type": "table",
        "object": "whanau_ora.fact_referrals_daily",
        "key-fields": [
          "org_sk",
          "date_id",
          "client_sk",
          "service_sk",
          "provider_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-date": {
      "source": {
        "type": "view",
        "object": "whanau_ora.v_dim_date",
        "key-fields": [
          "date_id"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-org": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_org",
        "key-fields": [
          "org_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-client": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_client",
        "key-fields": [
          "client_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-whanau": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_whanau",
        "key-fields": [
          "whanau_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-domain": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_domain",
        "key-fields": [
          "domain_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-outcome-area": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_outcome_area",
        "key-fields": [
          "outcome_area_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-service": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_service",
        "key-fields": [
          "service_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-provider": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_provider",
        "key-fields": [
          "provider_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-locality": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_locality",
        "key-fields": [
          "locality_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-user": {
      "source": {
        "type": "table",
        "object": "whanau_ora.dim_user",
        "key-fields": [
          "user_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "dim-client-demographics": {
      "source": {
        "type": "view",
        "object": "whanau_ora.dim_client_demographics",
        "key-fields": [
          "client_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "fact-actions": {
      "source": {
        "type": "table",
        "object": "whanau_ora.fact_actions",
        "key-fields": [
          "org_sk",
          "action_id"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "fact-reviews": {
      "source": {
        "type": "table",
        "object": "whanau_ora.fact_reviews",
        "key-fields": [
          "org_sk",
          "review_id"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    },
    "fact-user-performance": {
      "source": {
        "type": "table",
        "object": "whanau_ora.fact_user_performance",
        "key-fields": [
          "org_sk",
          "user_sk"
        ]
      },
      "rest": {
        "methods": [
          "get"
        ]
      },
      "graphql": false,
      "permissions": [
        {
          "role": "anonymous",
          "actions": [
            "read"
          ]
        }
      ]
    }
  }
}